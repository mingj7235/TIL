## 인터넷 통신

인터넷에서 컴퓨터 둘은 어떻게 통신하는가?

이러한 인터넷에서 어떻게 통신하는지 알기 위해서는 IP를 알아야 한다.

<br>

## IP (Internet Protocol)

복잡한 인터넷 망에서 '어떤 컴퓨터로 메세지를 전달하는지' 에 대한 규약

### IP 의 역할

지정한 IP 주소에 데이터 전달하는데, '패킷' 이라는 통신 단위로 데이터를 전달한다.

패킷 : 출발지 IP, 목적지 IP 를 만들고 그 안에 메세지를 담아서 던진다. 

인터넷에 이 패킷을 던진다.

인터넷 안에서 노드들이 패킷을 던지다보면 목적지에 도달하게 된다.

### IP 의 한계

1. 비연결성
- 패킷을 받을 대상이 없거나, 서비스 불능 상태여도 패킷은 전송이된다.
- 마치 편지를 보내도 그 목적지에 아무도 살지 않는데도 편지가 전송이 되는 경우와 같다.

-> 클라이언트는 대상 서버가 패킷을 받을 수 있는 상태인지 모른다. 


2. 비 신뢰성
- 중간에 패킷이 사라지면?
- 패킷이 여러개를 보냈을 때 패킷이 순서대로 오지 않으면?

-> 패킷 소실. 중간에 인터넷 노드가 꺼지게 된다면? 소실된다.
-> 패킷 여러개를 보냈을 때, 패킷의 순서가 보장되지 않음. 각각의 패킷이 다른 노드를 타게 되서 순서가 보장이 안됨. 

3. 프로그램 구분
- 같은 IP 를 사용하는 서버에서 통신하는 어플리케이션이 둘 이상이면?
- 한 pc 에서 음악도듣고 게임도 한다면..?


### 이러한 IP 의 한계를 극복하기 위해 TCP, UDP 통신이 나옴

<br>

## TCP, UDP

IP 만으로 해결이 되지 않았던 순서, 전송제어가 들어가게 된다.

### TCP 특징
전송 제어 프로토콜 (Transmission Control Protocol)

- 연결 지향 - TCP 3 way handshake : 연결이 된 것을 확인하고 메세지를 전송한다.
- 데이터 전달 보증 : 데이터가 누락된 것에 대해 알 수 있다.
- 순서 보장

-> 신뢰할 수 있는 프로토콜이다.
-> 현재 대부분 TCP 를 사용한다. 

#### 연결 지향 TCP 3 way handshake
 
 syn - syn + ack - ack 라는 3가지 방법으로 connect 즉, 연결을 한다.
 -> 이를 통해 클라이언트와 서버의 연결을 보장함.

 이 연결이 맺어지면, 그 후에 데이터를 전송한다.

 -> 3번째 ack 과 함께 데이터가 전송이 가능한 것임. (최적화로 인해 3번째 ack 와 함꼐 데이터를 전송한다.)


 #### 데이터 전달 보증

 TCP - IP 에서는 데이터를 전달하면, 서버에서 데이터를 잘 받았다고 응답을 보낸다.
 즉, 데이터를 전송했는데 응답이 없다면 문제가 있는 것

 #### 순서 보장

 서버에 순서가 잘못 패킷이 전달 되면, 잘못된 순서부터 다시 보내라고 클라이언트에 요구한다.
 즉, 중간에 잘못오면 서버가 다시 보낼 것을 내부적으로 요청한다.


 #### 이러한 것이 가능한 이유
 TCP 패킷에는 그 안에 여러가지 정보가 함꼐 더 있기 때문이다.

<br>

 ### UDP 특징
 사용자 데이터그램 프로토콜 (User Datagram Protocol)

- 기능이 거의 없다. 즉, 하얀 도화지.

- 데이터 전달 및 순서가 보장되지 않지만, 단순하고 빠르다.

- IP 와 거의 같지만, 'PORT' 만이 추가 된 것이다.
- 어플리케이션에서 추가 작업이 필요하다.

즉, UDP 는 IP 와 비슷하지만, Port 만이 추가 된 것이다.

- TCP 는 3 way handshake 등, 데이터 전달도 보증해야하고, 순서도 보장해야하기 때문에 느리다.
- TCP 는 이 프로토콜 자체를 손을 대지 못한다.

- UDP 를 통해 그 위해 어플리케이션 레벨에서 커스텀하면된다. 

- 최근에는 UDP 가 각광을 받고 있다. 

- http3 는 udp 를 사용! 

<br>

## Port

한번에 둘 이상 연결해야 하면??

IP만 가지고는 어떤 요청인지 구분할 수 없다.

IP는 목적지 서버를 찾는 것.
Port 는 같은 IP 내에서 프로세스를 구분하는 것.

IP 는 아파트, Port 는 그 아파트의 호수!

- 0 ~ 65535 할당 가능.


<br>

## DNS

IP 는 기억하기 어려움.
IP 는 변경될 수 있음.

DNS : Domain Name System

- 전화번호부라고 생각하면 됨.

도메인명으로 접속 -> DNS 서버에서 도메인에 매핑된 IP 를 응답 (전화번호부에서 찾음) -> 그 매핑된 IP 에 접속






