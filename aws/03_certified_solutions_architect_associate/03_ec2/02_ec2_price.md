# 인스턴스 구매옵션

## 구매옵션 개요

- 온디맨드 인스턴스

    - `약정 없이 초당 사용한 만큼` 비용 지불

- 스팟 인스턴스

    - AWS 에서사용 안 하는 `인스턴스를 경매 방식`으로 구매하여 사용

- 예약 인스턴스

    - 1년 또는 3년 기간을 약정하여 인스턴스를 사용

- Saving Plan

    - 1년 또는 3년 기간의 `일정 사용량`을 약정하여 `시간당 요금`으로 인스턴스를 사용

- 전용 호스트 / 전용 인스턴스

    - 전용 물리적 서버를 할당 받아서 인스턴스를 사용

<br>

## 온디맨드 인스턴스

- 사용한 만큼만 비용을 지불하는 인스턴스

- 처음 60초 이후 초당 과금

- 장기 약정이나 선 결제가 없다.

- `단기간` 동안 `예측할 수 없는` 워크로드 및 `중단되어서는 안되는` 애플리케이션에 적합

- EC2 에서 `처음으로 개발` 중이거나 `시험 중`인 애플리케이션 사용에 적합

<br>

## 예약 인스턴스

- 1년 또는 3년 `약정으로 구매`하는 인스턴스

- 온디맨드에 비해 최대 75% 저렴

- `수요가 꾸준하고 예측가능한 경우`에 유용 

- 결제 옵션은 전체 선결제, 부분 선결제, 선결제 없음 3가지 선택가능

- 선택가능한 예약 인스턴스 유형

    - 표쥰 예약 인스턴스 : 인스턴스 타입을 지정하면 예약 기간동안 변경 불가능

    - 전환형 예약 인스턴스 : 예약기간동안 인스턴스 타입 변경가능

    - 정기 예약 인스턴스 : 지정된 시간, 날짜 동안에 인스턴스가 시작되어 사용 (반복적이며 하루, 한 주 또는 한달의 일부 기간 동안 필요한 경우 적합)


<br>

## Saving Plans

- 1년 또는 3년 기간에 특정 사용량 약정으로 구매하는 인스턴스 

- EC2 뿐 아니라 Lambda 및 Fargate 서비스도 사용 가능

- 사용량은 시간당 USD 요금으로 측정

    - 예를들어 한 시간에 $5의 컴퓨팅 사용량을 약정하면 $5까지 Saviing Plans 가격이 청구 되고, 초과 사용량은 온디맨드 요금이 청구 됨 

- 온디맨드에 비해 최대 66~72% 저렴

- Compute Saving Plans 와 EC2 Instance Saving Plans 두가지 유형이 있음 (있는것만 알면된다.)

- 예약 인스턴스와 달리 EC2 인스턴스 패밀리, 인스턴스 사이즈, 리전, OS 관계 없이 적용 및 변경가능한   `유연성`이 있다. 


<br>

## 전용 호스트 / 전용 인스턴스

1. 전용 호스트

- 물리적인 전용 서버를 할당 받아 사용하는 방식

- CPU 소켓, 코어 등이 표시됨 

- 사용자가 인스턴스 배치 방법을 지정할 수 있음

- 소켓당, 코어당, 또는 VM 당으로 사용하는 `소프트웨어 라이선스 사용 가능`

- CPU 코어나 물리적 서버에 할당되는 `라이선스를 기존에 보유한 경우`에 적합


2. 전용 인스턴스

- 물리적인 전용 서버를 할당 받아 사용하는 방식 

- 전용 호스트에서 사용가능한 CPU 코어, 인스턴스 배치, 사용자 라이선스 `사용 불가`

<br>

## 스팟 인스턴스

- 사용하지 않는 예비 EC2용량을 경매방식으로 구매하여 사용하는 방식

- 온디맨드 인스턴스보다 최대 90% 저렴

- 경매 조건에 미달하면 인스턴스가 정지 또는 종료 되므로 `언제든지 시작 및 종료가 가능한 경우`에 사용

- 언제든 인스턴스가 종료될 수 있기 때문에 서버가 중단 없이 지속적으로 실행되어야 하는 경우 사용 안함

- 여러개의 스팟 인스턴스를 하나의 그룹으로 묶어 스팟 집합(Spot Fleets)으로 구매해서 사용
    - 가격이 저렴하므로 강력한 컴퓨팅 파워가 필요할 때 묶어서 사용

- `예약 인스턴스 + 스팟 인스턴스` 조합으로 사용

    - 짧은 시간 급격하게 증가된 용량이 필요한 경우 컴퓨팅 파워를 늘리기 위한 수단으로 스팟 인스턴스를 구매하여 사용한다.






